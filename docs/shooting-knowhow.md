# 🎥 Video Production Playbook（Yuchan）

このドキュメントは、**「つながりのある短尺動画」を再現性高く作るための実運用ノウハウ集**。
特に、A→B→C 連鎖で重要な **遷移（→）の設計品質** を主軸に整理する。

---

## 0. 目的

- キャラクター・方向・感情を保ちながら連続した映像を作る
- クリップ単体ではなく、**遷移の意味**を設計して物語をつなぐ
- 生成結果を検証し、次回プロンプトへ学習反映する

---

## 1. 制作原則（最重要）

1. **クリップではなく矢印を作る**
   - A/B/C それぞれより、A→B、B→C の意図を先に定義する。
2. **遷移1本 = 1イベント**
   - 1遷移に複数イベントを詰め込まない（視線変化 + 場所ジャンプ + 感情反転はNG）。
3. **継承3点を固定**
   - 主体（誰）
   - 方向（どちらへ）
   - 感情（どんな状態）
4. **変化は1〜2点だけ**
   - 背景 or カメラ or アクションを限定して変える。

---

## 2. 連鎖制作フロー（標準）

### Step A: クリップAを生成（約6秒）
- シーン導入（キャラ、空間、運動方向）を明確化。

### Step B: A末尾フレームを抽出
- Aの最後フレームを次クリップの開始シードにする。

### Step C: クリップBを生成（A末尾を開始に）
- **A→B遷移仕様**に従って生成。

### Step D: B末尾フレーム抽出 → クリップC生成
- B→C遷移仕様に従う。

### Step E: 結合・整形
- 6秒×3本を連結し、18.000秒など指定尺に整形。

### Step F: 検証
- 橋渡しフレーム（A_last/B_first, B_last/C_first）を保存。
- 目視 + 指標（PSNR等）で連続性を確認。

---

## 3. 遷移設計テンプレ（A→B / B→C）

遷移ごとに以下を1セット埋める。

```text
[Transition: A→B]
Intent: （この遷移で観客に何を感じさせるか）
Carry-over (固定):
- Character: 
- Direction:
- Emotion:
Change (変える要素 1〜2):
- Environment / Camera / Action:
Forbidden:
- （後ろ向き化、方向反転、急な別人化など）
Success Criteria:
- （何が満たされたらOKか）
```

---

## 4. プロンプト設計ルール（実践）

### 4.1 固定ブロック（毎回入れる）
- Same character identity (face, hair, freckles)
- Keep motion continuity from previous final frame
- Preserve screen direction unless explicitly changed

### 4.2 遷移ブロック（毎回差し替える）
- この遷移で起こすイベントを1つだけ記述
- カメラ指示（push-in / follow / orbit など）を1つ記述

### 4.3 禁止ブロック（崩れ防止）
- No rear-view running shot
- Do not turn back unless explicitly requested
- Avoid abrupt direction reversal
- Avoid identity drift

---

## 5. 失敗パターン辞典（よくある崩れ）

1. **後ろ向き化**
   - 症状: 終盤で背中向きに走り去る
   - 対策: “keep 3/4 front face visibility” を明記

2. **方向反転**
   - 症状: 左→右が途中で右→左になる
   - 対策: “maintain forward screen direction (left-to-right)” を固定

3. **イベント過積載**
   - 症状: 遷移が破綻し不自然なジャンプになる
   - 対策: 1遷移1イベントに戻す

4. **キャラ漂流（identity drift）**
   - 症状: 顔/髪/体格が別人化
   - 対策: 参照制約 + 先に静止画で整える

---

## 6. 品質ゲート（公開前チェック）

- [ ] A→B の意図を言語化できる
- [ ] B→C の意図を言語化できる
- [ ] 主体・方向・感情が連続している
- [ ] 禁止事項（後ろ向き化等）が発生していない
- [ ] 最終尺が指定秒数どおり
- [ ] 検証フレーム一式が保存されている

---

## 7. 連鎖方式の弱点（画質劣化）と対策

### 弱点
- A→B→C→D… と末尾フレーム連鎖を続けると、後段ほど画質が落ちやすい
- 典型症状:
  - 顔の微細ディテール損失
  - 輪郭のにじみ
  - 髪/布テクスチャの崩れ
  - 色のくすみ・ノイズ感の増加

### 原因
- 生成結果を次入力にするたび、モデル誤差が累積する
- 「連続性最優先」で回すと、品質アンカーが不足する

### 対策（実運用）
1. **リシード（再アンカー）**
   - 2〜3クリップごとに元の高品質キー画像へ戻す
2. **デュアル入力思想**
   - 連続性: 直前末尾フレーム
   - 品質保持: 元の高品質参照
   - 両方の意図をプロンプトで明示
3. **役割分離**
   - 生成時は物語連鎖を優先
   - 仕上げで全体の denoise / upscale / grain 統一を実施
4. **劣化監視ルール**
   - 各クリップ末尾で「顔・輪郭・色」を目視チェック
   - 閾値を下回ったら1段前へ戻って再生成

### 運用原則（短文）
- **連続性の鎖**と**画質の錨**を同時に持つ

---

## 8. 18秒チェーンの標準仕様（当面）

- 構成: 6秒 × 3クリップ
- 連鎖: A_last → B_seed, B_last → C_seed
- 重点: 遷移の意味（→）を毎回レビュー
- 公開: `docs/assets/` 配下に配置し、`docs/index.html` で再生可能にする

---

## 9. 運用メモ（更新ルール）

- 生成ごとに「失敗パターン辞典」を1行更新
- 良かった遷移はテンプレとして再利用タグ付け
- 週1でこのPlaybookを棚卸しして、不要ルールを削除

---

最終更新: 2026-02-20 (UTC)
